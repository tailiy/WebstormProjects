<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        .contians{
            width: 300px;
            height: 300px;
            overflow: hidden;
            text-align: center;


        }
        .box{
            vertical-align: middle;
        }



    </style>
</head>
<body>
    <div class="contians">
        <div class="box"><img src="pic/0.jpg"></div>
    </div>
<input type="button" value="!!" onclick="f1()">
</body>
<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>

<script>
    function f1(){
        var w = $(".contians img").width();
        console.log(w);
        var h = $(".contians img").height();
        console.log(h);
        if(w>=h){
            console.log("111");
            $(".contians img").css("width",300);

            $(".contians img").css("height","auto");
            var margintop = (300-$(".contians img").height())/2;
            $(".contians img").css("margin-top",margintop);

        }else{
            $(".contians img").css("height",h+"px");
            $(".contians img").css("width","auto");
        }
    }


</script>
</html>